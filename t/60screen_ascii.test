local vt=init()
local screen = wantscreen(vt, "") ac

-- Get
reset(state,screen)
push "ABC"
  movecursor 0,3
  ?screen_chars 0,0,1,3 = "ABC"
  ?screen_chars 0,0,1,80 = "ABC"
  ?screen_text 0,0,1,3 = 41,42,43
  ?screen_text 0,0,1,80 = 41,42,43
  ?screen_cell 0,0 = {41} width=1 attrs={} fg=rgb(240,240,240) bg=rgb(0,0,0)
  ?screen_cell 0,1 = {42} width=1 attrs={} fg=rgb(240,240,240) bg=rgb(0,0,0)
  ?screen_cell 0,2 = {43} width=1 attrs={} fg=rgb(240,240,240) bg=rgb(0,0,0)
  ?screen_row 0 = "ABC"
  ?screen_eol 0,0 = 0
  ?screen_eol 0,2 = 0
  ?screen_eol 0,3 = 1
push "\x1b[H"
  movecursor 0,0
  ?screen_row 0 = "ABC"
  ?screen_text 0,0,1,80 = 41,42,43
push "E"
  movecursor 0,1
  ?screen_row 0 = "EBC"
  ?screen_text 0,0,1,80 = 45,42,43

local screen = wantscreen(vt, "") -c

-- Erase
reset(state,screen)
push "ABCDE\x1b[H\x1b[K"
  ?screen_row 0 = ""
  ?screen_text 0,0,1,80 = 

-- Copycell
reset(state,screen)
push "ABC\x1b[H\x1b[@"
push "1"
  ?screen_row 0 = "1ABC"

reset(state,screen)
push "ABC\x1b[H\x1b[P"
  ?screen_chars 0,0,1,1 = "B"
  ?screen_chars 0,1,1,2 = "C"
  ?screen_chars 0,0,1,80 = "BC"

-- Space padding
reset(state,screen)
push "Hello\x1b[CWorld"
  ?screen_row 0 = "Hello World"
  ?screen_text 0,0,1,80 = 48,65,6c,6c,6f,20,57,6f,72,6c,64

-- Linefeed padding
reset(state,screen)
push "Hello\r\nWorld"
  ?screen_chars 0,0,2,80 = "Hello\nWorld"
  ?screen_text 0,0,2,80 = 48,65,6c,6c,6f,0a,57,6f,72,6c,64

-- Altscreen
reset(state,screen)
push "P"
  ?screen_row 0 = "P"
push "\x1b[?1049h"
  ?screen_row 0 = ""
push "\x1b[2K\x1b[HA"
  ?screen_row 0 = "A"
push "\x1b[?1049l"
  ?screen_row 0 = "P"
