# Test of cursor-control characters inside ESC sequences
local vt=init()
local state = wantstate(vt, "")
local screen = wantscreen(vt, "")

reset(state,screen)

push "A B C D E F G H I"
push "\x0d\x0a"
push "A\x1b[2\bCB\x1b[2\bCC\x1b[2\bCD\x1b[2\bCE\x1b[2\bCF\x1b[2\bCG\x1b[2\bCH\x1b[2\bCI"
push "\x0d\x0a"
push "A \x1b[\x0d2CB\x1b[\x0d4CC\x1b[\x0d6CD\x1b[\x0d8CE\x1b[\x0d10CF\x1b[\x0d12CG\x1b[\x0d14CH\x1b[\x0d16CI"
push "\x0d\x0a"
push "A \x1b[1\x0bAB \x1b[1\x0bAC \x1b[1\x0bAD \x1b[1\x0bAE \x1b[1\x0bAF \x1b[1\x0bAG \x1b[1\x0bAH \x1b[1\x0bAI \x1b[1\x0bA"

-- Output

$SEQ 0 2: ?screen_row \# = "A B C D E F G H I"
          ?screen_row  3 = "A B C D E F G H I "

?cursor = 3,18
