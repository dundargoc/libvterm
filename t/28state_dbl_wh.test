local vt=init()
local state = wantstate(vt, "g")

-- Single Width, Single Height
reset(state,screen)
push "\x1b#5"
push "Hello"
  putglyph 48 1 0,0
  putglyph 65 1 0,1
  putglyph 6c 1 0,2
  putglyph 6c 1 0,3
  putglyph 6f 1 0,4

-- Double Width, Single Height
reset(state,screen)
push "\x1b#6"
push "Hello"
  putglyph 48 1 0,0 dwl
  putglyph 65 1 0,1 dwl
  putglyph 6c 1 0,2 dwl
  putglyph 6c 1 0,3 dwl
  putglyph 6f 1 0,4 dwl
  ?cursor = 0,5
push "\x1b[40GAB"
  putglyph 41 1 0,39 dwl
  putglyph 42 1 1,0
  ?cursor = 1,1

-- Double Height
reset(state,screen)
push "\x1b#3"
push "Hello"
  putglyph 48 1 0,0 dwl dhl-top
  putglyph 65 1 0,1 dwl dhl-top
  putglyph 6c 1 0,2 dwl dhl-top
  putglyph 6c 1 0,3 dwl dhl-top
  putglyph 6f 1 0,4 dwl dhl-top
  ?cursor = 0,5
push "\r\n\x1b#4"
push "Hello"
  putglyph 48 1 1,0 dwl dhl-bottom
  putglyph 65 1 1,1 dwl dhl-bottom
  putglyph 6c 1 1,2 dwl dhl-bottom
  putglyph 6c 1 1,3 dwl dhl-bottom
  putglyph 6f 1 1,4 dwl dhl-bottom
  ?cursor = 1,5

-- Double Width scrolling
reset(state,screen)
push "\x1b[20H\x1b#6ABC"
  putglyph 41 1 19,0 dwl
  putglyph 42 1 19,1 dwl
  putglyph 43 1 19,2 dwl
push "\x1b[25H\n"
push "\x1b[19;4HDE"
  putglyph 44 1 18,3 dwl
  putglyph 45 1 18,4 dwl
push "\x1b[H\x1bM"
push "\x1b[20;6HFG"
  putglyph 46 1 19,5 dwl
  putglyph 47 1 19,6 dwl
